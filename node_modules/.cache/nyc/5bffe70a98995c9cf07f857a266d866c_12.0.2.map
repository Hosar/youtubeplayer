{"version":3,"sources":["youtube.js"],"names":["config","axios","Axios","create","baseURL","youtubeApi","endpoint","YoutubeService","countryCode","params","part","chart","regionCode","maxResults","key","get","video","id","then","res","result","data","viewCount","statistics","likeCount"],"mappings":";;;;;;;;;AAAA;;;;AACA;;IAAYA,M;;AACZ;;;;;;;;;;AAEA,IAAMC,QAAQC,gBAAMC,MAAN,CAAa;AACzBC,WAASJ,OAAOK,UAAP,CAAkBC;AADF,CAAb,CAAd;;IAIaC,c,WAAAA,c;;;;;;;sCACOC,W,EAAa;AAC7B,UAAMC,SAAS;AACbC,cAAM,SADO;AAEbC,eAAO,aAFM;AAGbC,oBAAYJ,WAHC,EAGY;AACzBK,oBAAY,IAJC;AAKbC,aAAKd,OAAOK,UAAP,CAAkBS;AALV,OAAf;;AASA,aAAOb,MAAMc,GAAN,CAAU,GAAV,EAAe,EAACN,cAAD,EAAf,CAAP;AACA;;;;;;;;;;;;;AAeD;;;oCAEsBO,K,EAAO;AAC5B,UAAMP,SAAS;AACbC,cAAM,YADO;AAEbO,YAAID,MAAMC,EAFG;AAGbH,aAAKd,OAAOK,UAAP,CAAkBS;AAHV,OAAf;;AAMA,aAAOb,MAAMc,GAAN,CAAU,GAAV,EAAe,EAACN,cAAD,EAAf,EAAyBS,IAAzB,CAA8B,UAASC,GAAT,EAAc;AACjD,YAAMC,SAASD,IAAIE,IAAnB;AACAL,cAAMM,SAAN,GAAkBF,OAAO,OAAP,EAAgB,CAAhB,EAAmBG,UAAnB,CAA8BD,SAAhD;AACAN,cAAMQ,SAAN,GAAkBJ,OAAO,OAAP,EAAgB,CAAhB,EAAmBG,UAAnB,CAA8BC,SAAhD;;AAEA,eAAOR,KAAP;AACD,OANM,CAAP;AAOD","file":"youtube.js","sourceRoot":"/home/hosar/Projects/youtube-trends-node/Code/services","sourcesContent":["import Axios from 'axios';\nimport * as config from '../config.json';\nimport moment from \"moment\";\n\nconst axios = Axios.create({\n  baseURL: config.youtubeApi.endpoint\n});\n\nexport class YoutubeService {\n  getTrendingVideos(countryCode) {\n    const params = {\n      part: 'snippet',\n      chart: 'mostPopular',\n      regionCode: countryCode, // should be replaced with country code from countryList\n      maxResults: '24',\n      key: config.youtubeApi.key\n    };\n\n\n    return axios.get('/', {params});\n    /*return axios.get('/', {params}).then(function(res){\n      result = res.data.items;\n      for (let i = 0; i < result.length; i++) {\n        result[i] = {\n          id: result[i].id,\n          title: result[i].snippet.title,\n          thumbnail: result[i].snippet.thumbnails.high.url,\n          publishedAt: moment(result[i].snippet.publishedAt).fromNow()\n        };\n        result[i] = YoutubeService.getVideoDetails(result[i]);\n      }\n\n      return result;\n    });*/\n\n  }\n\n  static getVideoDetails(video) {\n    const params = {\n      part: 'statistics',\n      id: video.id,\n      key: config.youtubeApi.key\n    };\n\n    return axios.get('/', {params}).then(function(res) {\n      const result = res.data;\n      video.viewCount = result['items'][0].statistics.viewCount;\n      video.likeCount = result['items'][0].statistics.likeCount;\n\n      return video;\n    });\n  }\n}\n"]}